apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: rp-keyvault
spec:
  provider: azure
  secretObjects:
    - secretName: rp-keyvault
      type: Opaque
      data:
        - key: ACR_RESOURCE_ID
          objectName: acr-resource-id
        - key: ADMIN_API_CLIENT_CERT_COMMON_NAME
          objectName: admin-api-client-cert-common-name
        - key: ARM_API_CLIENT_CERT_COMMON_NAME
          objectName: arm-api-client-cert-common-name
        - key: AZURE_ARM_CLIENT_ID
          objectName: azure-arm-client-id
        - key: AZURE_FP_CLIENT_ID
          objectName: azure-fp-client-id
        - key: AZURE_FP_SERVICE_PRINCIPAL_ID
          objectName: azure-fp-service-principal-id
        - key: CLUSTER_MDM_ACCOUNT
          objectName: cluster-mdm-account
        - key: CLUSTER_MDM_NAMESPACE
          objectName: cluster-mdm-namespace
        - key: CLUSTER_MDSD_ACCOUNT
          objectName: cluster-mdsd-account
        - key: CLUSTER_MDSD_CONFIG_VERSION
          objectName: cluster-mdsd-config-version
        - key: CLUSTER_MDSD_NAMESPACE
          objectName: cluster-mdsd-namespace
        - key: DATABASE_ACCOUNT_NAME
          objectName: database-account-name
        - key: DOMAIN_NAME
          objectName: domain-name
        - key: GATEWAY_DOMAINS
          objectName: gateway-domains
        - key: GATEWAY_RESOURCEGROUP
          objectName: gateway-resourcegroup
        - key: KEYVAULT_PREFIX
          objectName: keyvault-prefix
        - key: MDM_ACCOUNT
          objectName: mdm-account
        - key: MDM_NAMESPACE
          objectName: mdm-namespace
        - key: MDSD_ENVIRONMENT
          objectName: mdsd-environment
        - key: RP_FEATURES
          objectName: rp-features
        - key: RPIMAGE
          objectName: rpimage
        - key: ARO_INSTALL_VIA_HIVE
          objectName: aro-install-via-hive
        - key: ARO_HIVE_DEFAULT_INSTALLER_PULLSPEC
          objectName: aro-hive-default-installer-pullspec
        - key: ARO_ADOPT_BY_HIVE
          objectName: aro-adopt-by-hive
        - key: OIDC_AFD_ENDPOINT
          objectName: oidc-afd-endpoint
        - key: OIDC_STORAGE_ACCOUNT_NAME
          objectName: oidc-storage-account-name
        - key: MSI_RP_ENDPOINT
          objectName: msi-rp-endpoint
  parameters:
    usePodIdentity: "false"
    useVMManagedIdentity: "true"
    userAssignedIdentityID: "00000000-0000-0000-0000-000000000000"
    keyvaultName: "keyvaultname"
    tenantId: "azureTenantId"
    objects: |
      array:
        -|
          objectName: acr-resource-id
          objectType: secret
        -|
          objectName: admin-api-client-cert-common-name
          objectType: secret
        -|
          objectName: arm-api-client-cert-common-name
          objectType: secret
        -|
          objectName: azure-arm-client-id
          objectType: secret
        -|
          objectName: azure-fp-client-id
          objectType: secret
        -|
          objectName: azure-fp-service-principal-id
          objectType: secret
        -|
          objectName: cluster-mdm-account
          objectType: secret
        -|
          objectName: cluster-mdm-namespace
          objectType: secret
        -|
          objectName: cluster-mdsd-account
          objectType: secret
        -|
          objectName: cluster-mdsd-config-version
          objectType: secret
        -|
          objectName: cluster-mdsd-namespace
          objectType: secret
        -|
          objectName: database-account-name
          objectType: secret
        -|
          objectName: domain-name
          objectType: secret
        -|
          objectName: gateway-domains
          objectType: secret
        -|
          objectName: gateway-resourcegroup
          objectType: secret
        -|
          objectName: keyvault-prefix
          objectType: secret
        -|
          objectName: mdm-account
          objectType: secret
        -|
          objectName: mdm-namespace
          objectType: secret
        -|
          objectName: mdsd-environment
          objectType: secret
        -|
          objectName: rp-features
          objectType: secret
        -|
          objectName: rpimage
          objectType: secret
        -|
          objectName: aro-install-via-hive
          objectType: secret
        -|
          objectName: aro-hive-default-installer-pullspec
          objectType: secret
        -|
          objectName: aro-adopt-by-hive
          objectType: secret
        -|
          objectName: oidc-afd-endpoint
          objectType: secret
        -|
          objectName: oidc-storage-account-name
          objectType: secret
        -|
          objectName: msi-rp-endpoint
          objectType: secret