trigger: none
pr: none

parameters:
  - name: dryRun
    type: boolean
    default: false

resources:
  containers:
    - container: golang
      image: mcr.microsoft.com/oss/go/microsoft/golang:1.22-fips-cbl-mariner2.0@sha256:8850221fcd43650f27ff1613c2348b8a82e87403b8cc1e57bc86647a7632f80f
      options: --user=0

variables:
  - template: vars.yml

jobs:
  - job: Clean_subscription
    pool:
      name: 1es-aro-ci-pool

    steps:
      - template: ./templates/template-checkout.yml
      - template: ./templates/template-clean-subscription.yml
        parameters:
          dryRun: ${{ parameters.dryRun }}
          subscriptionCredentialsJSON: $(aro-v4-e2e-devops-spn)
          subscriptionId: $(subscriptionId)
          purgeCreatedTag: $(purgeCreatedTag)
          resourceGroupDeletePrefixes: $(resourceGroupDeletePrefixes)
          purgeTTL: $(purgeTTL)
