parameters:
  GOBIN: $(GOBIN)
  GOROOT: $(GOROOT)
  GOPATH: $(GOPATH)
  modulePath: $(modulePath)
steps:
- script: |
    mkdir -p '${{ parameters.GOBIN}}'
    mkdir -p '${{ parameters.GOPATH}}/pkg'
    mkdir -p '${{ parameters.modulePath}}'
    shopt -s extglob
    shopt -s dotglob
    mv !(gopath) '${{ parameters.modulePath}}'
    echo '##vso[task.prependpath]${{ parameters.GOBIN}}'
    echo '##vso[task.prependpath]${{ parameters.GOROOT}}/bin'
    go version
    sudo add-apt-repository ppa:kubuntu-ppa/backports
    sudo apt-get update
    sudo apt-get install libgpgme-dev gcc -y
  displayName: '⚙️Set up the workspace'