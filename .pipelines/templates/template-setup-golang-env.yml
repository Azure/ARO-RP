parameters:
  gobin: ''
  gopath: ''
  goroot: ''
  modulePath: ''
steps:
- script: |
    export
    echo ${{ parameters.gobin }}
    echo ${{ parameters.gopath }}
    echo ${{ parameters.modulePath }}
    echo ${{ parameters.goroot }}
    mkdir -p '${{ parameters.gobin }}'
    mkdir -p '${{ parameters.gopath }}/pkg'
    mkdir -p '${{ parameters.modulePath }}'
    shopt -s extglob
    shopt -s dotglob
    mv !(gopath) '${{ parameters.modulePath }}'
    echo '##vso[task.prependpath]${{ parameters.gobin }}'
    echo '##vso[task.prependpath]${{ parameters.goroot }}/bin'
    echo "$PATH"
    export
    go version
    go get github.com/jstemmer/go-junit-report
    go get github.com/axw/gocov/gocov
    go get github.com/AlekSi/gocov-xml
    go get -u gopkg.in/matm/v1/gocov-html
    sudo add-apt-repository ppa:kubuntu-ppa/backports
    sudo apt-get update
    sudo apt-get install libgpgme-dev gcc -y
  displayName: '⚙️Set up the workspace'