apiVersion: v1
data:
  log_level: {{ .Values.MISE.configMap.date.log_level }}
  # Follow the instructuions here to create appsettings.json.
  # https://identitydivision.visualstudio.com/DevEx/_git/Microsoft-IdentityModel-S2S?path=/docs/JsonConfigurations.md&_a=preview
  appsettings.json: |
    {
      "Version": "1",
      "AzureAd": {
        "Instance": "{{ .Values.MISE.configMap.Instance }}",
        "ClientId": "{{ .Values.MISE.configMap.ClientId }}",
        "TenantId": "{{ .Values.MISE.configMap.TenantId }}",
        "InboundPolicies": 
        [
          {
            "Label": "{{ .Values.MISE.configMap.InboundPolicies.Label }}",
            "Authority": "{{ .Values.MISE.configMap.InboundPolicies.Authority }}",
            "AuthenticationSchemes": ["{{ .Values.MISE.configMap.InboundPolicies.AuthenticationSchemes }}"],
          }
        ],
      },
      "AllowedHosts": "{{ .Values.MISE.configMap.AllowedHosts }}",
      "Kestrel": {
        "Endpoints": {
            "Http": {
                "Url": "{{ .Values.MISE.configMap.Kestrel.Endpoints.Url }}"
            }
        }
      }
    }
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: {{ .Values.MISE.container.volumes.configMap.name }}
