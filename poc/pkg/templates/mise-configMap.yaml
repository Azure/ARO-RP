apiVersion: v1
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: {{ .Values.MISE.container.volumes.configMap.name }}
data:
  log_level:  {{ .Values.MISE.container.volumes.configMap.log_level }}
  appsettings.json: |
    {
      "Version": "1",
      "AzureAd": {
        "InboundPolicies": 
        [
          {
            "Label": {{ .Values.MISE.configMap.InboundPolicies.Label }},
            "Instance": {{ .Values.MISE.configMap.Instance }},
            "ClientId": {{ .Values.MISE.configMap.ClientId }},
            "TenantId": {{ .Values.MISE.configMap.TenantId }},
            "Authority": {{ .Values.MISE.configMap.InboundPolicies.Authority }},
            "AuthenticationSchemes": {{ .Values.MISE.configMap.InboundPolicies.AuthenticationSchemes }},
          }
        ],
      },
      "AllowedHosts": {{ .Values.MISE.configMap.AllowedHosts }},
      "Kestrel": {
        "Endpoints": {
            "Http": {
                "Url": {{ .Values.MISE.configMap.Kestrel.Endpoints.Url }}
            }
        }
      }
    }
