// Code generated by github.com/bennerv/go-cosmosdb, DO NOT EDIT.

package cosmosdb

import (
	"context"
	"net/http"
	"strconv"
	"strings"

	pkg "github.com/Azure/ARO-RP/pkg/api"
)

type platformWorkloadIdentityRoleSetDocumentClient struct {
	*databaseClient
	path string
}

// PlatformWorkloadIdentityRoleSetDocumentClient is a platformWorkloadIdentityRoleSetDocument client
type PlatformWorkloadIdentityRoleSetDocumentClient interface {
	Create(context.Context, string, *pkg.PlatformWorkloadIdentityRoleSetDocument, *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocument, error)
	List(*Options) PlatformWorkloadIdentityRoleSetDocumentIterator
	ListAll(context.Context, *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error)
	Get(context.Context, string, string, *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocument, error)
	Replace(context.Context, string, *pkg.PlatformWorkloadIdentityRoleSetDocument, *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocument, error)
	Delete(context.Context, string, *pkg.PlatformWorkloadIdentityRoleSetDocument, *Options) error
	Query(string, *Query, *Options) PlatformWorkloadIdentityRoleSetDocumentRawIterator
	QueryAll(context.Context, string, *Query, *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error)
	ChangeFeed(*Options) PlatformWorkloadIdentityRoleSetDocumentIterator
}

type platformWorkloadIdentityRoleSetDocumentChangeFeedIterator struct {
	*platformWorkloadIdentityRoleSetDocumentClient
	continuation string
	options      *Options
}

type platformWorkloadIdentityRoleSetDocumentListIterator struct {
	*platformWorkloadIdentityRoleSetDocumentClient
	continuation string
	done         bool
	options      *Options
}

type platformWorkloadIdentityRoleSetDocumentQueryIterator struct {
	*platformWorkloadIdentityRoleSetDocumentClient
	partitionkey string
	query        *Query
	continuation string
	done         bool
	options      *Options
}

// PlatformWorkloadIdentityRoleSetDocumentIterator is a platformWorkloadIdentityRoleSetDocument iterator
type PlatformWorkloadIdentityRoleSetDocumentIterator interface {
	Next(context.Context, int) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error)
	Continuation() string
}

// PlatformWorkloadIdentityRoleSetDocumentRawIterator is a platformWorkloadIdentityRoleSetDocument raw iterator
type PlatformWorkloadIdentityRoleSetDocumentRawIterator interface {
	PlatformWorkloadIdentityRoleSetDocumentIterator
	NextRaw(context.Context, int, interface{}) error
}

// NewPlatformWorkloadIdentityRoleSetDocumentClient returns a new platformWorkloadIdentityRoleSetDocument client
func NewPlatformWorkloadIdentityRoleSetDocumentClient(collc CollectionClient, collid string) PlatformWorkloadIdentityRoleSetDocumentClient {
	return &platformWorkloadIdentityRoleSetDocumentClient{
		databaseClient: collc.(*collectionClient).databaseClient,
		path:           collc.(*collectionClient).path + "/colls/" + collid,
	}
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) all(ctx context.Context, i PlatformWorkloadIdentityRoleSetDocumentIterator) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error) {
	allplatformWorkloadIdentityRoleSetDocuments := &pkg.PlatformWorkloadIdentityRoleSetDocuments{}

	for {
		platformWorkloadIdentityRoleSetDocuments, err := i.Next(ctx, -1)
		if err != nil {
			return nil, err
		}
		if platformWorkloadIdentityRoleSetDocuments == nil {
			break
		}

		allplatformWorkloadIdentityRoleSetDocuments.Count += platformWorkloadIdentityRoleSetDocuments.Count
		allplatformWorkloadIdentityRoleSetDocuments.ResourceID = platformWorkloadIdentityRoleSetDocuments.ResourceID
		allplatformWorkloadIdentityRoleSetDocuments.PlatformWorkloadIdentityRoleSetDocuments = append(allplatformWorkloadIdentityRoleSetDocuments.PlatformWorkloadIdentityRoleSetDocuments, platformWorkloadIdentityRoleSetDocuments.PlatformWorkloadIdentityRoleSetDocuments...)
	}

	return allplatformWorkloadIdentityRoleSetDocuments, nil
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) Create(ctx context.Context, partitionkey string, newplatformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, options *Options) (platformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, err error) {
	headers := http.Header{}
	headers.Set("X-Ms-Documentdb-Partitionkey", `["`+partitionkey+`"]`)

	if options == nil {
		options = &Options{}
	}
	options.NoETag = true

	err = c.setOptions(options, newplatformWorkloadIdentityRoleSetDocument, headers)
	if err != nil {
		return
	}

	err = c.do(ctx, http.MethodPost, c.path+"/docs", "docs", c.path, http.StatusCreated, &newplatformWorkloadIdentityRoleSetDocument, &platformWorkloadIdentityRoleSetDocument, headers)
	return
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) List(options *Options) PlatformWorkloadIdentityRoleSetDocumentIterator {
	continuation := ""
	if options != nil {
		continuation = options.Continuation
	}

	return &platformWorkloadIdentityRoleSetDocumentListIterator{platformWorkloadIdentityRoleSetDocumentClient: c, options: options, continuation: continuation}
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) ListAll(ctx context.Context, options *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error) {
	return c.all(ctx, c.List(options))
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) Get(ctx context.Context, partitionkey, platformWorkloadIdentityRoleSetDocumentid string, options *Options) (platformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, err error) {
	headers := http.Header{}
	headers.Set("X-Ms-Documentdb-Partitionkey", `["`+partitionkey+`"]`)

	err = c.setOptions(options, nil, headers)
	if err != nil {
		return
	}

	err = c.do(ctx, http.MethodGet, c.path+"/docs/"+platformWorkloadIdentityRoleSetDocumentid, "docs", c.path+"/docs/"+platformWorkloadIdentityRoleSetDocumentid, http.StatusOK, nil, &platformWorkloadIdentityRoleSetDocument, headers)
	return
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) Replace(ctx context.Context, partitionkey string, newplatformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, options *Options) (platformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, err error) {
	headers := http.Header{}
	headers.Set("X-Ms-Documentdb-Partitionkey", `["`+partitionkey+`"]`)

	err = c.setOptions(options, newplatformWorkloadIdentityRoleSetDocument, headers)
	if err != nil {
		return
	}

	err = c.do(ctx, http.MethodPut, c.path+"/docs/"+newplatformWorkloadIdentityRoleSetDocument.ID, "docs", c.path+"/docs/"+newplatformWorkloadIdentityRoleSetDocument.ID, http.StatusOK, &newplatformWorkloadIdentityRoleSetDocument, &platformWorkloadIdentityRoleSetDocument, headers)
	return
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) Delete(ctx context.Context, partitionkey string, platformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, options *Options) (err error) {
	headers := http.Header{}
	headers.Set("X-Ms-Documentdb-Partitionkey", `["`+partitionkey+`"]`)

	err = c.setOptions(options, platformWorkloadIdentityRoleSetDocument, headers)
	if err != nil {
		return
	}

	err = c.do(ctx, http.MethodDelete, c.path+"/docs/"+platformWorkloadIdentityRoleSetDocument.ID, "docs", c.path+"/docs/"+platformWorkloadIdentityRoleSetDocument.ID, http.StatusNoContent, nil, nil, headers)
	return
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) Query(partitionkey string, query *Query, options *Options) PlatformWorkloadIdentityRoleSetDocumentRawIterator {
	continuation := ""
	if options != nil {
		continuation = options.Continuation
	}

	return &platformWorkloadIdentityRoleSetDocumentQueryIterator{platformWorkloadIdentityRoleSetDocumentClient: c, partitionkey: partitionkey, query: query, options: options, continuation: continuation}
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) QueryAll(ctx context.Context, partitionkey string, query *Query, options *Options) (*pkg.PlatformWorkloadIdentityRoleSetDocuments, error) {
	return c.all(ctx, c.Query(partitionkey, query, options))
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) ChangeFeed(options *Options) PlatformWorkloadIdentityRoleSetDocumentIterator {
	continuation := ""
	if options != nil {
		continuation = options.Continuation
	}

	return &platformWorkloadIdentityRoleSetDocumentChangeFeedIterator{platformWorkloadIdentityRoleSetDocumentClient: c, options: options, continuation: continuation}
}

func (c *platformWorkloadIdentityRoleSetDocumentClient) setOptions(options *Options, platformWorkloadIdentityRoleSetDocument *pkg.PlatformWorkloadIdentityRoleSetDocument, headers http.Header) error {
	if options == nil {
		return nil
	}

	if platformWorkloadIdentityRoleSetDocument != nil && !options.NoETag {
		if platformWorkloadIdentityRoleSetDocument.ETag == "" {
			return ErrETagRequired
		}
		headers.Set("If-Match", platformWorkloadIdentityRoleSetDocument.ETag)
	}
	if len(options.PreTriggers) > 0 {
		headers.Set("X-Ms-Documentdb-Pre-Trigger-Include", strings.Join(options.PreTriggers, ","))
	}
	if len(options.PostTriggers) > 0 {
		headers.Set("X-Ms-Documentdb-Post-Trigger-Include", strings.Join(options.PostTriggers, ","))
	}
	if len(options.PartitionKeyRangeID) > 0 {
		headers.Set("X-Ms-Documentdb-PartitionKeyRangeID", options.PartitionKeyRangeID)
	}

	return nil
}

func (i *platformWorkloadIdentityRoleSetDocumentChangeFeedIterator) Next(ctx context.Context, maxItemCount int) (platformWorkloadIdentityRoleSetDocuments *pkg.PlatformWorkloadIdentityRoleSetDocuments, err error) {
	headers := http.Header{}
	headers.Set("A-IM", "Incremental feed")

	headers.Set("X-Ms-Max-Item-Count", strconv.Itoa(maxItemCount))
	if i.continuation != "" {
		headers.Set("If-None-Match", i.continuation)
	}

	err = i.setOptions(i.options, nil, headers)
	if err != nil {
		return
	}

	err = i.do(ctx, http.MethodGet, i.path+"/docs", "docs", i.path, http.StatusOK, nil, &platformWorkloadIdentityRoleSetDocuments, headers)
	if IsErrorStatusCode(err, http.StatusNotModified) {
		err = nil
	}
	if err != nil {
		return
	}

	i.continuation = headers.Get("Etag")

	return
}

func (i *platformWorkloadIdentityRoleSetDocumentChangeFeedIterator) Continuation() string {
	return i.continuation
}

func (i *platformWorkloadIdentityRoleSetDocumentListIterator) Next(ctx context.Context, maxItemCount int) (platformWorkloadIdentityRoleSetDocuments *pkg.PlatformWorkloadIdentityRoleSetDocuments, err error) {
	if i.done {
		return
	}

	headers := http.Header{}
	headers.Set("X-Ms-Max-Item-Count", strconv.Itoa(maxItemCount))
	if i.continuation != "" {
		headers.Set("X-Ms-Continuation", i.continuation)
	}

	err = i.setOptions(i.options, nil, headers)
	if err != nil {
		return
	}

	err = i.do(ctx, http.MethodGet, i.path+"/docs", "docs", i.path, http.StatusOK, nil, &platformWorkloadIdentityRoleSetDocuments, headers)
	if err != nil {
		return
	}

	i.continuation = headers.Get("X-Ms-Continuation")
	i.done = i.continuation == ""

	return
}

func (i *platformWorkloadIdentityRoleSetDocumentListIterator) Continuation() string {
	return i.continuation
}

func (i *platformWorkloadIdentityRoleSetDocumentQueryIterator) Next(ctx context.Context, maxItemCount int) (platformWorkloadIdentityRoleSetDocuments *pkg.PlatformWorkloadIdentityRoleSetDocuments, err error) {
	err = i.NextRaw(ctx, maxItemCount, &platformWorkloadIdentityRoleSetDocuments)
	return
}

func (i *platformWorkloadIdentityRoleSetDocumentQueryIterator) NextRaw(ctx context.Context, maxItemCount int, raw interface{}) (err error) {
	if i.done {
		return
	}

	headers := http.Header{}
	headers.Set("X-Ms-Max-Item-Count", strconv.Itoa(maxItemCount))
	headers.Set("X-Ms-Documentdb-Isquery", "True")
	headers.Set("Content-Type", "application/query+json")
	if i.partitionkey != "" {
		headers.Set("X-Ms-Documentdb-Partitionkey", `["`+i.partitionkey+`"]`)
	} else {
		headers.Set("X-Ms-Documentdb-Query-Enablecrosspartition", "True")
	}
	if i.continuation != "" {
		headers.Set("X-Ms-Continuation", i.continuation)
	}

	err = i.setOptions(i.options, nil, headers)
	if err != nil {
		return
	}

	err = i.do(ctx, http.MethodPost, i.path+"/docs", "docs", i.path, http.StatusOK, &i.query, &raw, headers)
	if err != nil {
		return
	}

	i.continuation = headers.Get("X-Ms-Continuation")
	i.done = i.continuation == ""

	return
}

func (i *platformWorkloadIdentityRoleSetDocumentQueryIterator) Continuation() string {
	return i.continuation
}
