(this["webpackJsonparo-rp"]=this["webpackJsonparo-rp"]||[]).push([[0],{173:function(e,t,n){"use strict";n.r(t);var r=n(69),a=n.n(r),s=n(8),i=n(0),c=n(4),o=n(262),l=n(252),u=n(9),d=n(253),j=n(254),b=n(21),h=n(245),p=n(257),m=n(246),O=n(73),f=n(219),x=n(39),v=n(19),g=n.n(v),y=n(176),C=n(244),S=n(248),w=n(250),k=n(251),T=n(40),L=n.n(T),A=n(2),I={iconName:"Cancel"},R={iconName:"Copy"},P=[{key:0,text:"master-0"},{key:1,text:"master-1"},{key:2,text:"master-2"}],N=Object(c.B)(),B=Object(c.E)({container:{display:"flex",flexFlow:"column nowrap",alignItems:"stretch"},header:[{flex:"1 1 auto",borderTop:"4px solid ".concat(N.palette.themePrimary),color:N.palette.neutralPrimary,display:"flex",alignItems:"center",fontSize:c.e.xLargePlus,fontWeight:c.f.semibold,padding:"12px 12px 14px 24px"}],body:{flex:"4 4 auto",padding:"0 24px 24px 24px",overflowY:"hidden",selectors:{p:{margin:"14px 0"},"p:first-child":{marginTop:0},"p:last-child":{marginBottom:0}}}}),D={root:{color:N.palette.neutralPrimary,marginLeft:"auto",marginTop:"4px",marginRight:"2px"},rootHovered:{color:N.palette.neutralDark}},E=Object(i.forwardRef)((function(e,t){var n=e.csrfToken,r=Object(f.a)(!1),a=Object(s.a)(r,2),c=a[0],j=a[1],b=j.setTrue,h=j.setFalse,p=Object(y.a)("title"),m=Object(f.a)(!1),O=Object(s.a)(m,2),v=O[0],T=O[1],N=T.setTrue,E=T.setFalse,z=Object(i.useState)(""),M=Object(s.a)(z,2),H=M[0],F=M[1],G=Object(i.useState)(),_=Object(s.a)(G,2),V=_[0],W=_[1],U=Object(f.a)(!1),Z=Object(s.a)(U,2),K=Z[0],q=Z[1],Q=q.setTrue,J=q.setFalse,X=Object(i.useState)(),Y=Object(s.a)(X,2),$=Y[0],ee=Y[1],te=Object(i.useState)(null),ne=Object(s.a)(te,2),re=ne[0],ae=ne[1];Object(i.useImperativeHandle)(t,(function(){return{LoadSSH:function(e){J(),ee(null),ae(null),b(),F(e)}}})),Object(i.useEffect)((function(){function e(){return(e=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ae(null),e.next=4,L()({method:"post",url:H+"/ssh/new",data:{master:null===V||void 0===V?void 0:V.key},headers:{"X-CSRF-Token":n.current}});case 4:t=e.sent,ee(t.data),Q(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Q(),ae(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}v&&V&&(E(),function(){e.apply(this,arguments)}())}),[H,V,n,v,E,Q]);var se=function(e,t){W(t),Q()};return Object(A.jsx)("div",{children:Object(A.jsxs)(w.a,{titleAriaId:p,isOpen:c,onDismiss:h,isModeless:!0,containerClassName:B.container,children:[Object(A.jsxs)("div",{className:B.header,children:[Object(A.jsx)("span",{id:p,children:"SSH Access"}),Object(A.jsx)(o.a,{styles:D,iconProps:I,ariaLabel:"Close popup modal",onClick:h})]}),Object(A.jsxs)("div",{className:B.body,children:[Object(A.jsxs)("p",{children:["Before requesting SSH access, please ensure you have read the"," ",Object(A.jsx)("a",{href:"https://msazure.visualstudio.com/AzureRedHatOpenShift/_wiki/wikis/ARO.wiki/136823/ARO-SRE-portal?anchor=ssh-(elevated)",children:"SSH docs"}),"."]}),re&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return ae(null)},dismissButtonAriaLabel:"Close",children:null===re||void 0===re?void 0:re.statusText}),$?Object(A.jsx)("div",{children:Object(A.jsxs)(d.a,{children:[Object(A.jsxs)(d.a,{horizontal:!0,verticalAlign:"end",children:[Object(A.jsx)(d.a.Item,{grow:!0,children:Object(A.jsx)(S.a,{label:"Command",value:null===$||void 0===$?void 0:$.command,readOnly:!0})}),Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(o.a,{iconProps:R,ariaLabel:"Copy command",onClick:function(){$&&navigator.clipboard.writeText($.command)}})})]}),Object(A.jsxs)(d.a,{horizontal:!0,verticalAlign:"end",children:[Object(A.jsxs)(d.a.Item,{grow:!0,children:[Object(A.jsx)(S.a,{label:"Password",value:null===$||void 0===$?void 0:$.password,type:"password",canRevealPassword:!0,readOnly:!0})," "]}),Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(o.a,{iconProps:R,ariaLabel:"Copy password",onClick:function(){$&&navigator.clipboard.writeText($.password)}})})]})]})}):Object(A.jsxs)(d.a,{tokens:{childrenGap:15},children:[Object(A.jsx)(C.a,{label:"Machine Selection",onChange:se,options:P}),Object(A.jsx)(k.a,{onClick:N,text:"Request",disabled:!K})]})]})]})})}));E.displayName="sshmodal";var z=n(259),M=function(e){return 403===e.status?(document.location.href="/api/login",null):e},H=function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/clusters");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0.response,e.abrupt("return",M(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/"+t.subscription+"/"+t.resourceGroup+"/"+t.name);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),r=e.t0.response,e.abrupt("return",M(r));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/info");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0.response,e.abrupt("return",M(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/"+t.subscription+"/"+t.resourceGroup+"/"+t.name+"/nodes");case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),r=e.t0.response,e.abrupt("return",M(r));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/"+t.subscription+"/"+t.resourceGroup+"/"+t.name+"/machines");case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),r=e.t0.response,e.abrupt("return",M(r));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()("/api/"+t.subscription+"/"+t.resourceGroup+"/"+t.name+"/machine-sets");case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),r=e.t0.response,e.abrupt("return",M(r));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()({method:"POST",url:"/api/logout"});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response,console.log(n);case 11:document.location.href="/api/login";case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(x.a)(g.a.mark((function e(t,n){var r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L()({method:"POST",url:n+"/kubeconfig/new",headers:{"X-CSRF-Token":t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response,e.abrupt("return",M(a));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),K=n(258),q=n(33),Q=n(34),J=n(36),X=n(35),Y=n(30),$=n(241),ee={root:{margin:"11px 0"}},te={root:{margin:"15px 0"}},ne=[{type:Y.a.line,height:32,width:"25%"}],re=[{type:Y.a.line,height:18,width:"75%"}],ae={root:{paddingTop:10,paddingRight:15}},se={root:{paddingTop:10}},ie={root:{fontStyle:"bold",alignSelf:"flex-start",fontVariantAlternates:"bold",color:"grey",paddingBottom:10}},ce={root:{paddingBottom:10}},oe={apiServerVisibility:"ApiServer Visibility",apiServerURL:"ApiServer URL",architectureVersion:"Architecture Version",consoleLink:"Console Link",createdAt:"Created At",createdBy:"Created By",failedProvisioningState:"Failed Provisioning State",infraId:"Infra Id",lastAdminUpdateError:"Last Admin Update Error",lastModifiedAt:"Last Modified At",lastModifiedBy:"Last Modified By",lastProvisioningState:"Last Provisioning State",location:"Location",name:"Name",provisioningState:"Provisioning State",resourceId:"Resource Id",version:"Version",installStatus:"Installation Status"};function le(e){if("string"==typeof e.value)return Object(A.jsx)(d.a.Item,{styles:e.style,children:Object(A.jsx)(p.a,{styles:e.style,variant:"medium",children:e.value})})}var ue=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){return Object(q.a)(this,n),t.call(this,e)}return Object(Q.a)(n,[{key:"render",value:function(){var e=this,t=Object.entries(oe),n=[];return 0!=this.props.item.length?(t.filter((function(t){null!=e.props.item[t[0]]&&e.props.item[t[0]].toString().length>0&&n.push(t)})),Object(A.jsxs)(d.a,{styles:ft,children:[Object(A.jsx)(p.a,{variant:"xxLarge",children:this.props.clusterName}),Object(A.jsxs)(d.a,{horizontal:!0,children:[Object(A.jsx)(d.a,{styles:ae,children:n.map((function(e,t){return Object(A.jsx)(le,{style:ie,value:e[1]},t)}))}),Object(A.jsx)(d.a,{styles:ae,children:Array(n.length).fill(":").map((function(e,t){return Object(A.jsx)(le,{style:ie,value:e},t)}))}),Object(A.jsx)(d.a,{styles:se,children:n.map((function(t,n){return Object(A.jsx)(le,{style:ce,value:e.props.item[t[0]]},n)}))})]})]})):Object(A.jsxs)(d.a,{children:[Object(A.jsx)($.a,{styles:te,shimmerElements:ne,width:"25%"}),t.map((function(e){return Object(A.jsx)($.a,{styles:ee,shimmerElements:re,width:"75%"},e[0])}))]})}}]),n}(i.Component),de={root:{marginBottom:15}};function je(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],h=Object(i.useRef)(null),p=Object(i.useState)(""),m=Object(s.a)(p,2),O=m[0],f=m[1];return Object(i.useEffect)((function(){e.detailPanelSelected.toLowerCase()==Ke&&""===O&&e.loaded&&""!=e.currentCluster.name&&(f("FETCHING"),F(e.currentCluster).then((function(t){var n;200===(null===t||void 0===t?void 0:t.status)?(n=t.data,a(n),h&&h.current&&h.current.setState({item:n,detailPanelSelected:e.detailPanelSelected})):b(t),f(e.currentCluster.name)})))}),[r,e.loaded,e.clusterName]),Object(A.jsxs)(d.a,{children:[Object(A.jsx)(d.a.Item,{grow:!0,children:j&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return b(null)},dismissButtonAriaLabel:"Close",styles:de,children:null===j||void 0===j?void 0:j.statusText})}),Object(A.jsx)(d.a,{children:Object(A.jsx)(ue,{item:r,clusterName:null!=e.currentCluster?e.currentCluster.name:""})})]})}var be=n(118),he=n(90),pe=n(249),me=(Y.a.line,Y.a.line,{root:{paddingTop:10,paddingRight:15}}),Oe={root:{paddingTop:10}},fe={root:{fontStyle:"bold",alignSelf:"flex-start",fontVariantAlternates:"bold",color:"grey",paddingBottom:10}},xe={root:{paddingBottom:10}};function ve(e){if("string"==typeof e.value)return Object(A.jsx)(d.a.Item,{styles:e.style,children:Object(A.jsx)(p.a,{styles:e.style,variant:"medium",children:e.value})})}var ge=function(e){var t=Object.entries(e.headers),n=[];return t.filter((function(t){null!=e.object[t[0]]&&e.object[t[0]].toString().length>0&&n.push(t)})),Object(A.jsxs)(d.a,{styles:ft,children:[Object(A.jsx)(p.a,{variant:e.titleSize,children:e.title}),Object(A.jsxs)(d.a,{horizontal:!0,children:[Object(A.jsx)(d.a,{styles:me,children:n.map((function(e,t){return Object(A.jsx)(ve,{style:fe,value:e[1]},t)}))}),Object(A.jsx)(d.a,{styles:me,children:Array(n.length).fill(":").map((function(e,t){return Object(A.jsx)(ve,{style:fe,value:e},t)}))}),Object(A.jsx)(d.a,{styles:Oe,children:n.map((function(t,n){return Object(A.jsx)(ve,{style:xe,value:e.object[t[0]]},n)}))})]})]})},ye=function(e){return e.items.map((function(t){return Object(A.jsx)(ge,{headers:e.headers,object:t,title:t[e.subProp],titleSize:t[e.titleSize]},t.key)}))},Ce={root:{width:"45%"}},Se={createdTime:"Created Time"},we={CPU:"CPU",Memory:"Memory",StorageVolume:"Storage Volume",Pods:"Pods"},ke={status:"Status",lastHeartbeatTime:"Last Heartbeat Time",lastTransitionTime:"Last Transition Time",message:"Message"},Te={key:"Key"},Le={Path:"Device Path"},Ae=function(e){var t={};return e.forEach((function(e,n){t[n]=n})),t},Ie=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t};function Re(e){return Object(A.jsx)(pe.a,{linkFormat:"tabs",overflowBehavior:"menu",children:(t=e.nodes,t.map((function(e){return Object(A.jsxs)(be.a,{headerText:e.name,children:[Object(A.jsx)(p.a,{variant:"xLarge",children:e.name}),Object(A.jsxs)(d.a,{horizontal:!0,grow:!0,children:[Object(A.jsxs)(d.a,{styles:Ce,children:[Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:Se,object:e,title:"Overview",titleSize:"large"})}),Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:we,object:e.capacity,title:"Capacity",titleSize:"large"})}),Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:we,object:e.allocatable,title:"Allocatable",titleSize:"large"})}),Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:Ae(e.labels),object:Ie(e.labels),title:"Labels",titleSize:"large"})})]}),Object(A.jsxs)(d.a,{styles:Ce,children:[Object(A.jsxs)(he.a,{children:[Object(A.jsx)(p.a,{variant:"large",styles:ft,children:"Conditions"}),Object(A.jsx)(ye,{headers:ke,items:e.conditions,title:"Conditions",subProp:"type",titleSize:"medium"})]}),Object(A.jsxs)(he.a,{children:[Object(A.jsx)(p.a,{variant:"large",styles:ft,children:"Taints"}),Object(A.jsx)(ye,{headers:Te,items:e.taints,title:"Taints",subProp:"effect",titleSize:"medium"})]}),Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:Ae(e.annotations),object:Ie(e.annotations),title:"Annotations",titleSize:"large"})})]}),e.volumes.length>0&&Object(A.jsxs)(he.a,{children:[Object(A.jsx)(p.a,{variant:"large",children:"Volumes"}),Object(A.jsx)(ye,{headers:Le,items:e.volumes,title:"Volumes",subProp:"Name",titleSize:"medium"})]})]})]},e.name)})))});var t}var Pe=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).state={nodes:r.props.nodes},r}return Object(Q.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(d.a,{styles:ft,children:[Object(A.jsx)(p.a,{variant:"xxLarge",children:this.props.clusterName}),Object(A.jsx)(d.a,{children:Object(A.jsx)(Re,{nodes:this.state.nodes})})]})}}]),n}(i.Component);function Ne(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],h=Object(i.useRef)(null),p=Object(i.useState)(""),m=Object(s.a)(p,2),O=m[0],f=m[1],x={root:{marginBottom:15}};return Object(i.useEffect)((function(){e.detailPanelSelected.toLowerCase()==qe&&""===O&&e.loaded&&""!=e.currentCluster.name&&(f("FETCHING"),_(e.currentCluster).then((function(t){200===(null===t||void 0===t?void 0:t.status)?function(e){a(e);var t=[];h&&h.current&&(e.nodes.forEach((function(e){var n={name:e.name,createdTime:e.createdTime,capacity:e.capacity,allocatable:e.allocatable,taints:[]};e.taints.forEach((function(e){n.taints.push(e)})),n.conditions=[],e.conditions.forEach((function(e){n.conditions.push(e)})),n.labels=new Map([]),Object.entries(e.labels).forEach((function(e){var t;null===(t=n.labels)||void 0===t||t.set(e[0],e[1])})),n.volumes=[],e.volumes.forEach((function(e){n.volumes.push(e)})),n.annotations=new Map([]),Object.entries(e.annotations).forEach((function(e){var t;null===(t=n.annotations)||void 0===t||t.set(e[0],e[1])})),t.push(n)})),h.current.setState({nodes:t}))}(t.data):b(t),f(e.currentCluster.name)})))}),[r,e.loaded,e.detailPanelSelected]),Object(A.jsxs)(d.a,{children:[Object(A.jsx)(d.a.Item,{grow:!0,children:j&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return b(null)},dismissButtonAriaLabel:"Close",styles:x,children:null===j||void 0===j?void 0:j.statusText})}),Object(A.jsx)(d.a,{children:Object(A.jsx)(Pe,{nodes:r,ref:h,clusterName:null!=e.currentCluster?e.currentCluster.name:""})})]})}var Be={root:{width:"45%"}},De={createdTime:"Created Time",lastUpdated:"Last Updated",errorReason:"Error Reason",errorMessage:"Error Message",lastOperation:"Last Operation",lastOperationDate:"Last Operation Date",status:"Status"},Ee=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).state={machines:r.props.machines},r}return Object(Q.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(d.a,{styles:ft,children:[Object(A.jsx)(p.a,{variant:"xxLarge",children:this.props.clusterName}),Object(A.jsx)(d.a,{children:Object(A.jsx)(pe.a,{linkFormat:"tabs",overflowBehavior:"menu",children:(e=this.state.machines,e.map((function(e){return Object(A.jsx)(be.a,{headerText:e.name,children:Object(A.jsx)(d.a,{styles:Be,children:Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:De,object:e,title:e.name,titleSize:"large"})})})},e.name)})))})})]});var e}}]),n}(i.Component);function ze(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],h=Object(i.useRef)(null),p=Object(i.useState)(""),m=Object(s.a)(p,2),O=m[0],f=m[1],x={root:{marginBottom:15}};return Object(i.useEffect)((function(){e.detailPanelSelected.toLowerCase()==Qe&&""===O&&e.loaded&&""!=e.currentCluster.name&&(f("FETCHING"),V(e.currentCluster).then((function(t){200===(null===t||void 0===t?void 0:t.status)?function(e){a(e);var t=[];h&&h.current&&(e.machines.forEach((function(e){var n={name:e.name,createdTime:e.createdTime,lastUpdated:e.lastUpdated,errorReason:e.errorReason,errorMessage:e.errorMessage,lastOperation:e.lastOperation,lastOperationDate:e.lastOperationDate,status:e.status};t.push(n)})),h.current.setState({machines:t}))}(t.data):b(t),f(e.currentCluster.name)})))}),[r,e.loaded,e.detailPanelSelected]),Object(A.jsxs)(d.a,{children:[Object(A.jsx)(d.a.Item,{grow:!0,children:j&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return b(null)},dismissButtonAriaLabel:"Close",styles:x,children:null===j||void 0===j?void 0:j.statusText})}),Object(A.jsx)(d.a,{children:Object(A.jsx)(Ee,{machines:r,ref:h,clusterName:null!=e.currentCluster?e.currentCluster.name:""})})]})}var Me={root:{width:"45%"}},He={name:"Name",type:"Type",createdAt:"Created Time",desiredReplicas:"Desired Replicas Count",replicas:"Actual Replicas Count",errorReason:"Error Reason",errorMessage:"Error Message"},Fe=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){var r;return Object(q.a)(this,n),(r=t.call(this,e)).state={machineSets:r.props.machineSets},r}return Object(Q.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(d.a,{styles:ft,children:[Object(A.jsx)(p.a,{variant:"xxLarge",children:this.props.clusterName}),Object(A.jsx)(d.a,{children:Object(A.jsx)(pe.a,{linkFormat:"tabs",overflowBehavior:"menu",children:(e=this.state.machineSets,e.map((function(e){return Object(A.jsx)(be.a,{headerText:e.name,children:Object(A.jsx)(d.a,{styles:Me,children:Object(A.jsx)(he.a,{children:Object(A.jsx)(ge,{headers:He,object:e,title:e.name,titleSize:"large"})})})},e.name)})))})})]});var e}}]),n}(i.Component);function Ge(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],h=Object(i.useRef)(null),p=Object(i.useState)(""),m=Object(s.a)(p,2),O=m[0],f=m[1],x={root:{marginBottom:15}};return Object(i.useEffect)((function(){e.detailPanelSelected.toLowerCase()==Je&&""===O&&e.loaded&&""!=e.currentCluster.name&&(f("FETCHING"),W(e.currentCluster).then((function(t){200===(null===t||void 0===t?void 0:t.status)?function(e){a(e);var t=[];h&&h.current&&(e.machines.forEach((function(e){var n={name:e.name,type:e.type,createdAt:e.createdat,desiredReplicas:e.desiredreplicas.toString(),replicas:e.replicas.toString(),errorReason:e.errorreason,errorMessage:e.errormessage};t.push(n)})),h.current.setState({machineSets:t}))}(t.data):b(t),f(e.currentCluster.name)})))}),[r,e.loaded,e.detailPanelSelected]),Object(A.jsxs)(d.a,{children:[Object(A.jsx)(d.a.Item,{grow:!0,children:j&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return b(null)},dismissButtonAriaLabel:"Close",styles:x,children:null===j||void 0===j?void 0:j.statusText})}),Object(A.jsx)(d.a,{children:Object(A.jsx)(Fe,{machineSets:r,ref:h,clusterName:null!=e.currentCluster?e.currentCluster.name:""})})]})}var _e=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){return Object(q.a)(this,n),t.call(this,e)}return Object(Q.a)(n,[{key:"render",value:function(){switch(this.props.detailPanelVisible.toLowerCase()){case"overview":return Object(A.jsx)(je,{clusterName:this.props.item.name,currentCluster:this.props.cluster,detailPanelSelected:this.props.detailPanelVisible,loaded:this.props.isDataLoaded});case"nodes":return Object(A.jsx)(Ne,{currentCluster:this.props.cluster,detailPanelSelected:this.props.detailPanelVisible,loaded:this.props.isDataLoaded});case"machines":return Object(A.jsx)(ze,{currentCluster:this.props.cluster,detailPanelSelected:this.props.detailPanelVisible,loaded:this.props.isDataLoaded});case"machinesets":return Object(A.jsx)(Ge,{currentCluster:this.props.cluster,detailPanelSelected:this.props.detailPanelVisible,loaded:this.props.isDataLoaded})}}}]),n}(i.Component),Ve={root:{width:155,paddingRight:"10px"},link:{whiteSpace:"normal",lineHeight:"inherit"},groupContent:{marginBottom:"0px"}},We={root:{top:"40px",left:"225px"},content:{paddingLeft:30,paddingRight:5},navigation:{justifyContent:"flex-start"}},Ue={root:{alignSelf:"flex-start",flexGrow:2,height:48,paddingLeft:30,marginBottom:15}},Ze={root:{height:"100%",width:40,paddingTop:4,paddingRight:10,svg:{fill:"#e3222f"}}},Ke="overview",qe="nodes",Qe="machines",Je="machinesets",Xe={root:{marginBottom:15}};function Ye(e){var t,n=Object(i.useState)([]),r=Object(s.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)(null),h=Object(s.a)(o,2),p=h[0],m=h[1],x=Object(i.useRef)(null),v=Object(i.useState)(""),g=Object(s.a)(v,2),y=g[0],C=g[1],S=Object(f.a)(!1),w=Object(s.a)(S,2),k=w[0],T=w[1],L=T.setTrue,I=T.setFalse,R=Object(i.useState)(!1),P=Object(s.a)(R,2),N=P[0],B=P[1],D=Object(i.useState)("Overview"),E=Object(s.a)(D,2),M=E[0],H=E[1],G=[{links:[{name:"Overview",key:Ke,url:"#overview",icon:"ThisPC"},{name:"Nodes",key:qe,url:"#nodes",icon:"BuildQueue"},{name:"Machines",key:Qe,url:"#machines",icon:"BuildQueue"},{name:"MachineSets",key:Je,url:"#machinesets",icon:"BuildQueue"}]}];Object(i.useEffect)((function(){if(null!=e.currentCluster){var t=e.currentCluster.resourceId;""===y&&"DONE"===e.loaded&&""!=t&&(C("FETCHING"),m(null),F(e.currentCluster).then((function(e){var n;200===(null===e||void 0===e?void 0:e.status)?(n=e.data,c(n),x&&x.current&&x.current.setState({item:n}),B(!0)):m(e),C(t)})))}}),[a,y,C]),Object(i.useEffect)((function(){if(null!=e.currentCluster){var t=e.currentCluster.resourceId;""!=t&&(t==y?(L(),B(!0)):(c([]),C(""),B(!1),L()))}else B(!1)}),[null===(t=e.currentCluster)||void 0===t?void 0:t.resourceId]);return Object(A.jsx)(j.a,{isOpen:k,type:b.a.custom,onDismiss:function(){I(),e.onClose(),c([]),C(""),B(!1),m(null)},isBlocking:!1,styles:We,closeButtonAriaLabel:"Close",onRenderHeader:function(){var t;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(d.a,{styles:Ue,horizontal:!0,children:[Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(O.a,{styles:Ze,iconName:"openshift-svg"})}),Object(A.jsxs)(d.a.Item,{children:[Object(A.jsx)("div",{className:Ct.titleText,children:null===(t=e.currentCluster)||void 0===t?void 0:t.name}),Object(A.jsx)("div",{className:Ct.subtitleText,children:"Cluster"})]})]})})},children:Object(A.jsxs)(d.a,{children:[Object(A.jsx)(d.a.Item,{grow:!0,children:p&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return m(null)},dismissButtonAriaLabel:"Close",styles:Xe,children:null===p||void 0===p?void 0:p.statusText})}),Object(A.jsxs)(d.a,{horizontal:!0,children:[Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(K.a,{onLinkClick:function(e,t){t&&""!==t.name&&H(t.name)},ariaLabel:"Select a tab to view",styles:Ve,groups:G})}),Object(A.jsx)(z.a,{vertical:!0}),Object(A.jsx)(d.a.Item,{grow:!0,children:Object(A.jsx)(_e,{item:a,cluster:e.currentCluster,isDataLoaded:N,detailPanelVisible:M})})]})]})})}var $e=n(260),et=n(242),tt=n(240),nt=n(38),rt=n(12),at=n(119),st=Object(i.forwardRef)((function(e){var t=e.csrfToken,n=e.resourceId,r=Object(i.useState)({name:"",content:""}),a=Object(s.a)(r,2),c=a[0],l=a[1],u=Object(i.useState)(null),d=Object(s.a)(u,2),j=d[0],b=d[1],h=Object(i.useState)("DONE"),p=Object(s.a)(h,2),O=p[0],f=p[1],x=Object(i.useRef)(null);return Object(i.useEffect)((function(){""===O&&(f("FETCHING"),Z(t.current,n).then((function(e){if(200===(null===e||void 0===e?void 0:e.status)){var t=new Blob([e.request.response]),n=URL.createObjectURL(t),r=Object(at.parse)(e.headers["content-disposition"]).parameters.filename;l({content:n,name:r})}else b(e);f("DONE")})))}),[O,j,c,n,t]),Object(i.useLayoutEffect)((function(){c.content&&x&&x.current&&(x.current.href=c.content,x.current.download=c.name,x.current.click(),URL.revokeObjectURL(c.content),c.content="")}),[c]),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(m.a,{content:"Download Kubeconfig",children:[Object(A.jsx)(o.a,{iconProps:{iconName:"HardDriveGroup"},disabled:"FETCHING"===O,"aria-label":"Download Kubeconfig",onClick:function(){return f("")}}),Object(A.jsx)("a",{style:{display:"none"},ref:x,href:"#",children:"dl"})]})})}));st.displayName="kubeconfigbutton";var it={root:{marginBottom:15}},ct=Object(c.E)({controlWrapper:{display:"flex",flexWrap:"wrap"},fullWidth:{width:"100%"},fileIconImg:{verticalAlign:"middle",maxHeight:"20px",maxWidth:"20px"},headerIcon:{height:18,paddingTop:1},iconContainer:{margin:"-11px 0px",height:42},controlButtonContainer:{paddingLeft:0},itemsCount:{padding:"10px 0px"}}),ot={root:{paddingLeft:0}},lt={root:{fontSize:0,marginBottom:20,padding:0}},ut={headerWrapper:{marginTop:"-16px"}},dt=function(e){Object(J.a)(n,e);var t=Object(X.a)(n);function n(e){var r;Object(q.a)(this,n),(r=t.call(this,e))._sshModal=void 0,r._onChangeText=function(e,t){r.setState({items:t?r.props.items.filter((function(e){return e.resourceId.toLowerCase().indexOf(t)>-1})):r.props.items})},r._onColumnClick=function(e,t){var n=r.state,a=n.columns,s=n.items,i=a.slice(),c=i.filter((function(e){return t.key===e.key}))[0];i.forEach((function(e){e===c?(c.isSortedDescending=!c.isSortedDescending,c.isSorted=!0):(e.isSorted=!1,e.isSortedDescending=!0)})),r.setState({columns:i,items:s})},r._sshModal=e.sshModalRef;var a=[{key:"icon",name:"",fieldName:"",minWidth:24,isRowHeader:!1,data:"string",isPadded:!1,maxWidth:24,onRender:function(){return Object(A.jsx)(d.a,{horizontal:!0,verticalAlign:"center",className:ct.iconContainer,children:Object(A.jsx)("img",{src:"/favicon.ico",className:ct.headerIcon,alt:""})})}},{key:"name",name:"Name",fieldName:"name",minWidth:100,flexGrow:10,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",onRender:function(e){return Object(A.jsx)($e.a,{onClick:function(){return r._onClusterInfoLinkClick(e)},children:e.name})},isPadded:!0},{key:"subscription",name:"Subscription",fieldName:"subscription",minWidth:100,flexGrow:10,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",isPadded:!0},{key:"version",name:"Version",fieldName:"version",minWidth:50,flexGrow:3,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",isPadded:!0},{key:"createdDate",name:"Creation Date",fieldName:"createdAt",minWidth:100,flexGrow:5,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",isPadded:!0},{key:"provisionedBy",name:"Provisioned By",fieldName:"provisionedBy",minWidth:100,flexGrow:5,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",isPadded:!0},{key:"state",name:"State",fieldName:"provisioningState",minWidth:100,flexGrow:5,isRowHeader:!0,isResizable:!0,isSorted:!0,isSortedDescending:!1,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,onRender:function(e){return Object(A.jsxs)(p.a,{children:[e.provisioningState,e.failedProvisioningState&&" - "+e.failedProvisioningState]})},data:"string",isPadded:!0},{key:"icons",name:"Actions",fieldName:"icons",minWidth:92,flexGrow:5,isRowHeader:!1,data:"string",isPadded:!0,onRender:function(t){return Object(A.jsxs)(d.a,{horizontal:!0,verticalAlign:"center",className:ct.iconContainer,children:[Object(A.jsx)(m.a,{content:"Copy Resource ID",children:Object(A.jsx)(o.a,{iconProps:{iconName:"Copy"},"aria-label":"Copy Resource ID",onClick:function(){return r._onCopyResourceID(t)}})}),Object(A.jsx)(m.a,{content:"Prometheus",children:Object(A.jsx)(o.a,{iconProps:{iconName:"BIDashboard"},"aria-label":"Prometheus",href:t.resourceId+"/prometheus"})}),Object(A.jsx)(m.a,{content:"SSH",children:Object(A.jsx)(o.a,{iconProps:{iconName:"CommandPrompt"},"aria-label":"SSH",onClick:function(){return r._onSSHClick(t)}})}),Object(A.jsx)(st,{resourceId:t.resourceId,csrfToken:e.csrfToken})]})}}];return r.state={items:r.props.items,columns:a,modalOpen:!1},r}return Object(Q.a)(n,[{key:"render",value:function(){var e=this.state,t=e.columns,n=e.items;return Object(A.jsxs)(d.a,{children:[Object(A.jsx)("div",{className:ct.controlWrapper,children:Object(A.jsx)(S.a,{placeholder:"Filter on resource ID",onChange:this._onChangeText})}),Object(A.jsxs)(p.a,{className:ct.itemsCount,children:["Showing ",n.length," items"]}),Object(A.jsx)(tt.a,{items:n,columns:t,selectionMode:nt.b.none,getKey:this._getKey,setKey:"none",layoutMode:rt.e.fixedColumns,isHeaderVisible:!0,onItemInvoked:this._onItemInvoked,styles:ut})]})}},{key:"_getKey",value:function(e){return e.key}},{key:"_onSSHClick",value:function(e){var t=this._sshModal;t&&t.current&&t.current.LoadSSH(e.resourceId)}},{key:"_onCopyResourceID",value:function(e){navigator.clipboard.writeText(e.resourceId)}},{key:"_onClusterInfoLinkClick",value:function(e){this.props.setCurrentCluster(e)}},{key:"_onItemInvoked",value:function(e){alert("Item invoked: ".concat(e.resourceId))}}]),n}(i.Component);function jt(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(null),o=Object(s.a)(c,2),j=o[0],b=o[1],h=Object(i.useRef)(null),p=Object(i.useState)(""),m=Object(s.a)(p,2),O=m[0],f=m[1],x=function(e){a(e),h&&h.current&&h.current.setState({items:e})};Object(i.useEffect)((function(){""===O&&"DONE"===e.loaded&&(f("FETCHING"),H().then((function(e){200===(null===e||void 0===e?void 0:e.status)?x(e.data):b(e),f("DONE")})))}),[r,O,f,e.loaded]);var v=[{key:"refresh",text:"Refresh",iconProps:{iconName:"Refresh"},onClick:function(){x([]),f("")}}];return Object(A.jsxs)(d.a,{children:[Object(A.jsx)("span",{className:Ct.titleText,children:"Clusters"}),Object(A.jsx)("span",{className:Ct.subtitleText,children:"Azure Red Hat OpenShift"}),Object(A.jsx)(et.a,{items:v,ariaLabel:"Use left and right arrow keys to navigate between commands",className:ct.controlButtonContainer,styles:ot}),Object(A.jsx)(z.a,{styles:lt}),j&&Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return b(null)},dismissButtonAriaLabel:"Close",styles:it,children:null===j||void 0===j?void 0:j.statusText}),Object(A.jsx)(dt,{items:r,ref:h,sshModalRef:e.sshBox,setCurrentCluster:e.setCurrentCluster,csrfToken:e.csrfToken})]})}var bt={},ht={childrenGap:10},pt={root:{marginBottom:15}},mt={root:[{width:"100%",padding:0}]},Ot={root:{fontWeight:600}},ft={root:[{padding:20}]},xt={root:{padding:"0px 15px",height:40}},vt={icon:{color:c.d.white}},gt={semanticColors:{bodyBackground:c.d.themePrimary,bodyText:c.d.white}},yt={navigation:{height:40,lineHeight:40,fontSize:15,paddingLeft:15,justifyContent:"start",alignItems:"center"}},Ct=Object(c.E)({titleText:{fontWeight:600,fontSize:24,lineHeight:32},subtitleText:{color:"#646464",fontSize:12,lineHeight:14,margin:0}});Object(c.I)({icons:{"openshift-svg":Object(A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 64 64",children:[Object(A.jsxs)("g",{children:[Object(A.jsx)("path",{d:"M17.424 27.158L7.8 30.664c.123 1.545.4 3.07.764 4.566l9.15-3.333c-.297-1.547-.403-3.142-.28-4.74M60 16.504c-.672-1.386-1.45-2.726-2.35-3.988l-9.632 3.506c1.12 1.147 2.06 2.435 2.83 3.813z"}),Object(A.jsx)("path",{d:"M38.802 13.776c2.004.935 3.74 2.21 5.204 3.707l9.633-3.506a27.38 27.38 0 0 0-10.756-8.95c-13.77-6.42-30.198-.442-36.62 13.326a27.38 27.38 0 0 0-2.488 13.771l9.634-3.505c.16-2.087.67-4.18 1.603-6.184 4.173-8.947 14.844-12.83 23.79-8.658"})]}),Object(A.jsx)("path",{d:"M9.153 35.01L0 38.342c.84 3.337 2.3 6.508 4.304 9.33l9.612-3.5a17.99 17.99 0 0 1-4.763-9.164"}),Object(A.jsx)("path",{d:"M49.074 31.38a17.64 17.64 0 0 1-1.616 6.186c-4.173 8.947-14.843 12.83-23.79 8.657a17.71 17.71 0 0 1-5.215-3.7l-9.612 3.5c2.662 3.744 6.293 6.874 10.748 8.953 13.77 6.42 30.196.44 36.618-13.328a27.28 27.28 0 0 0 2.479-13.765l-9.61 3.498z"}),Object(A.jsx)("path",{d:"M51.445 19.618l-9.153 3.332c1.7 3.046 2.503 6.553 2.24 10.08l9.612-3.497c-.275-3.45-1.195-6.817-2.7-9.915"})]})}});var St=function(){var e=Object(i.useState)({location:"",csrf:"",elevated:!1,username:""}),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),c=Object(s.a)(a,2),x=c[0],v=c[1],g=Object(f.a)(!1),y=Object(s.a)(g,2),C=y[0],S=y[1],w=S.setTrue,k=S.setFalse,T=Object(i.useState)(""),L=Object(s.a)(T,2),I=L[0],R=L[1],P=Object(i.useState)(null),N=Object(s.a)(P,2),B=N[0],D=N[1],z=Object(i.useState)(ft),M=Object(s.a)(z,2),H=M[0],F=M[1],_=Object(i.useRef)(null),V=Object(i.useRef)("");Object(i.useEffect)((function(){""===I&&(R("FETCHING"),G().then((function(e){200===(null===e||void 0===e?void 0:e.status)?(r(e.data),V.current=e.data.csrf):v(e),R("DONE")})))}),[I,x,n]);var W=Object(i.useCallback)((function(){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(o.a,{iconProps:{iconName:"GlobalNavButton"},onClick:k})})}),[k]);return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(d.a,{styles:mt,tokens:bt,horizontalAlign:"stretch",children:[Object(A.jsx)(j.a,{isLightDismiss:!0,styles:yt,type:b.a.smallFixedNear,isOpen:C,onDismiss:k,closeButtonAriaLabel:"Close",onRenderNavigationContent:W,children:Object(A.jsx)("p",{children:"regions go here"})}),Object(A.jsx)(h.a,{theme:gt,children:Object(A.jsxs)(d.a,{grow:!0,tokens:ht,horizontalAlign:"start",verticalAlign:"center",horizontal:!0,styles:xt,children:[Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(o.a,{iconProps:{iconName:"GlobalNavButton"},onClick:w,styles:vt})}),Object(A.jsx)(d.a.Item,{grow:!0,children:Object(A.jsxs)(p.a,{styles:Ot,children:["ARO Portal ",n.location?"("+n.location+")":""]})}),Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(p.a,{children:n.username})}),Object(A.jsx)(d.a.Item,{hidden:!n.elevated,children:Object(A.jsx)(m.a,{content:"Elevated User",children:Object(A.jsx)(O.a,{iconName:"Admin"})})}),Object(A.jsx)(d.a.Item,{children:Object(A.jsx)(o.a,{iconProps:{iconName:"SignOut"},onClick:function(){U()},styles:vt})})]})}),Object(A.jsxs)(d.a,{styles:H,children:[Object(A.jsx)(d.a.Item,{grow:!0,children:x&&(console.log(x),Object(A.jsx)(l.a,{messageBarType:u.a.error,isMultiline:!1,onDismiss:function(){return v(null)},dismissButtonAriaLabel:"Close",styles:pt,children:null===x||void 0===x?void 0:x.statusText}))}),Object(A.jsx)(d.a.Item,{grow:!0,children:Object(A.jsx)(jt,{csrfToken:V,sshBox:_,setCurrentCluster:D,loaded:I})}),Object(A.jsx)(d.a.Item,{grow:!0,children:Object(A.jsx)(Ye,{csrfToken:V,loaded:I,currentCluster:B,onClose:function(){D(null),F(ft)}})})]}),Object(A.jsx)(E,{csrfToken:V,ref:_})]})})},wt=n(120);Object(wt.a)(),Object(c.F)({":global(body,html,#root)":{margin:0,padding:0,height:"100vh"}}),a.a.render(Object(A.jsx)(St,{}),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.252489cf.chunk.js.map